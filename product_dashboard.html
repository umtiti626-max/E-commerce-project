  <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style> 
          /* Dark mode variables */
        body.dark-mode {
          --primary: #a259f7;
          --primary-dark: #7c3aed;
          --danger: #e11d48;
          --success: #22c55e;
          --bg: #181824;
          --border: #23263a;
          --text: #f3f4fa;
          --muted: #b3b6c7;
          --white: #23263a;
          --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.30);
        }
        body.dark-mode {
          background: var(--bg);
          color: var(--text);
          transition: background 0.4s, color 0.4s;
        }
        body.dark-mode .header {
          background: var(--white);  
          border-bottom-color: rgb(82, 80, 80) ;
          box-shadow: 0 6px 24px 0 rgba(80, 156, 255, 0.18);
        }
        body.dark-mode .logo {
          color: var(--primary);
        }
        body.dark-mode .products-section {
          background: var(--white);
          box-shadow: var(--shadow);
        }
        body.dark-mode .products-title {
          color: var(--text);
        }
        body.dark-mode .add-product-btn {
          background: var(--primary);
          color: var(--text);
        }
        body.dark-mode .products-table {
          background: var(--white);
          border: 1px solid var(--border);
        }
        body.dark-mode .products-table th {
          background: #23263a;
          color: var(--muted);
        }
        body.dark-mode .products-table td {
          border: 1px solid var(--border);
          color: var(--text);
        }
        body.dark-mode .products-filters input,
        body.dark-mode .products-filters select {
          background: #23263a;
          color: var(--text);
          border: 1px solid var(--border);
        }
        body.dark-mode .search-icon {
          filter: invert(1) brightness(1.5);
        }
        body.dark-mode .pagination span,
        body.dark-mode .pagination a {
          color: var(--primary);
        }
        body.dark-mode .products-header-actions {
          background: transparent;
        }
        body.dark-mode .add-product-btn:before {
          background: rgba(162,89,247,0.2);
        }
          /* Dark mode for add/update product panels */
    body.dark-mode .add-product-panel,
    body.dark-mode .update-product-panel {
      background: var(--white);
      color: var(--text);
      box-shadow: var(--shadow);
      border-left-color: rgb(82, 80, 80);
    }
    body.dark-mode .add-product-form input[type="text"],
    body.dark-mode .add-product-form input[type="number"],
    body.dark-mode .add-product-form input[type="file"],
    body.dark-mode .add-product-form textarea,
    body.dark-mode .add-product-form select,
    body.dark-mode .update-product-form input[type="text"],
    body.dark-mode .update-product-form input[type="number"],
    body.dark-mode .update-product-form input[type="file"],
    body.dark-mode .update-product-form textarea,
    body.dark-mode .update-product-form select {
      background: #23263a;
      color: #fff;
      border: 1.5px solid #dad9d9;
      transition: background 0.3s, color 0.3s, border 0.3s;
    }
    body.dark-mode .add-product-form input[type="file"]::-webkit-file-upload-button,
    body.dark-mode .update-product-form input[type="file"]::-webkit-file-upload-button {
      background: #23263a;
      color: #fff;
      border: grey;
    }
    body.dark-mode .add-product-form input:focus,
    body.dark-mode .add-product-form textarea:focus,
    body.dark-mode .add-product-form select:focus,
    body.dark-mode .update-product-form input:focus,
    body.dark-mode .update-product-form textarea:focus,
    body.dark-mode .update-product-form select:focus {
      border-color: var(--primary);
      outline: none;
    }
      /* Dark mode: search input wrapper white border */
    body.dark-mode .search-input-wrapper {
      border: 1.5px solid #fff;
      border-radius: 7px;
      padding: 2px;
      background: #23263a;
      transition: border 0.3s, background 0.3s;
    }

   

  .add-product-btn {
      width: 220px !important;
      min-width: 180px !important;
      max-width: 180px ;margin-right: 40px !important;
      height: 48px !important;
      box-sizing: border-box;
      transition: none !important;
    }
    :root {
      --primary: #a259f7;
      --primary-dark: #7c3aed;
      --danger: #e11d48;
      --success: #22c55e;
      --bg: #fafbfc;
      --border: #e5e7eb;
      --text: #22223b;
      --muted: #6b7280;
      --white: #fff;
      --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.10);
    }
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: 'Inter', Arial, Helvetica, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }
    body {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 140px;
      width: 100%;
      background: var(--white);
      border-bottom: 1px solid var(--border);
    }
    .logo {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .logo-img{
        display: flex;
        width: 220px;
        margin-left: 60px;
    }
   
     /* Shift switch icon and add button when panel is active */
    .products-section.panel-active .products-header-actions {
      gap: 30px !important;
      transition: gap 0.4s cubic-bezier(.23,1.02,.32,1);
    }
    .products-section.panel-active .add-product-btn {
      width: auto !important;
      min-width: 180px !important;
      height: 48px !important;
      transition: none;
    }
    .products-header-actions {
      display: flex;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
      margin-left: auto;
      transition: gap 0.4s cubic-bezier(.23,1.02,.32,1);
    }
    @media (max-width: 900px) {
      .products-section.panel-active .products-header-actions {
        margin-right: 0;
        margin-bottom: 16px;
      }

    }
    .main-content {
      display: flex;
      flex: 1 1 auto;
      padding: 0;
      min-height: 0;
      height: calc(100vh - 90px);
      position: relative;
      background: var(--bg);
      overflow: hidden;
    }
    .products-section {
      background: var(--white);
      border-radius: 0 0 0 0;
      box-shadow: var(--shadow);
      padding: 82px 86px 84px 66px;
      flex: 1 1 0;
      width: 100%;
      height: 100%;
      
      
      display: flex;
      flex-direction: column;
      min-width: 0;
      transition: width 0.5s cubic-bezier(.23,1.02,.32,1), flex 0.5s cubic-bezier(.23,1.02,.32,1), box-shadow 0.3s;
      overflow: auto;
      z-index: 1;
    }
    .products-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }
    .products-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text);
    }
    .add-product-btn {
      background: var(--primary);
      color: var(--white);
      border: none;
      border-radius: 1px;
      padding: 10px 28px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 2px 8px 0 rgba(162,89,247,0.10);
      transition: background 0.2s, box-shadow 0.2s, transform 0.2s;
      display: flex;
      align-items: center;
      gap: 8px;
      position: relative;
      overflow: hidden;
    }
    .add-product-btn:active {
      background: var(--primary-dark);
      transform: scale(0.97);
    }
    .add-product-btn:before {
      content: '';
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%) scale(0);
      border-radius: 50%;
      background: rgba(255,255,255,0.2);
      width: 200%;
      height: 200%;
      transition: transform 0.5s cubic-bezier(.4,0,.2,1), opacity 0.5s;
      opacity: 0;
      z-index: 1;
    }
    .add-product-btn:active:before {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
      transition: 0s;
    }
    .products-filters {
      display: flex;
      gap: 18px;
      margin-bottom: 18px;
    }
    .products-filters input, .products-filters select {
      padding: 10px 16px;
      border: 1px solid var(--border);
      border-radius: 7px;
      font-size: 1rem;
      background: #f7f8fa;
      color: var(--text);
      outline: none;
      transition: border 0.2s;
    }
    .products-filters input:focus, .products-filters select:focus {
      border-color: var(--primary);
    }
    .search-input-wrapper {
      position: relative;
      display: flex;
      align-items: center;
    }
    .search-input-wrapper input[type="text"] {
      width: 240px;
      padding-left: 38px;
      transition: width 0.2s;
    }
    .search-icon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      width: 18px;
      height: 18px;
      opacity: 0.7;
      pointer-events: none;
      transition: opacity 0.2s;
    }
    @media (max-width: 700px) {
      .search-input-wrapper input[type="text"] {
        width: 100%;
        min-width: 0;
      }
    }
    .products-table {
      width: 100%;
     border: 1px solid  #fafbfc;
      border-spacing: 0;
      background: var(--white);
      margin-bottom: 18px;
    }
    .products-table th, .products-table td {
      padding: 14px 12px;
      text-align: left;
      font-size: 1rem;
      
      vertical-align: middle;
    }
    .products-table td{
       border: 1px solid var(--border); 
    }
    .products-table th {
      color: var(--muted);
      font-weight: 600;
      background: #fafbfc;
    }
    .products-table td img {
      width: 28px;
      height: 28px;
      object-fit: cover;
      background: transparent;
     
    }
    .grid{
        width: 45px;
        margin-top: 5px;
        margin-left: 1000px;
    }
    .products-table td .edit, .products-table td .delete {
      cursor: pointer;
      border: none;
      background: none;
      font-size: 0.7rem;
      margin-right: 8px;
      transition: color 0.2s, transform 0.2s;
    }
    .products-table td .edit {
     background: transparent;
    }
    .products-table td .edit:hover {
      color: var(--primary-dark);
      transform: scale(1.15);
    }
    .products-table td .delete {
      color: var(--danger);
    }
    .products-table td .delete:hover {
      color: #b91c1c;
      transform: scale(1.15);
    }
    .products-table td.stock {
      color: var(--success);
      font-weight: 600;
    }
    .pagination {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 18px;
      color: var(--muted);
      font-size: 1rem;
      margin-top: 8px;
    }
    .pagination span, .pagination a {
      cursor: pointer;
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s;
    }
    .pagination span.disabled {
      color: var(--muted);
      cursor: default;
    }
    /* Add Product Panel */
    .add-product-panel {
      background: var(--white);
      border-radius: 0 0 0 0;
      border: 1px solid;
      border-left-color: #ecedee;
      border-right-color: none;
      border-top-color: transparent;
      border-bottom-color: transparent;
      flex: 0 0 0;
      min-width: 340px;
      max-width: 420px;
      width: 0;
      height: 100%;
      padding: 32px 28px 24px 28px;
      margin-left: 0;
      display: flex;
      flex-direction: column;
      opacity: 0;
      pointer-events: none;
      transform: translateX(60px) scale(0.98);
      transition: opacity 0.5s cubic-bezier(.23,1.02,.32,1), transform 0.5s cubic-bezier(.23,1.02,.32,1), width 0.5s cubic-bezier(.23,1.02,.32,1), flex 0.5s cubic-bezier(.23,1.02,.32,1);
      position: relative;
      z-index: 2;
      overflow: hidden;
    }
    .add-product-panel.active {
      opacity: 1;
      pointer-events: auto;
      transform: translateX(0) scale(1);
      animation: slideInPanel 0.7s cubic-bezier(.23,1.02,.32,1);
      width: 100%;
      max-width: 420px;
      flex: 0 0 420px;
    }
    @keyframes slideInPanel {
      from {
        opacity: 0;
        transform: translateX(60px) scale(0.98);
      }
      60% {
        opacity: 1;
        transform: translateX(-8px) scale(1.01);
      }
      to {
        opacity: 1;
        transform: translateX(0) scale(1);
      }
    }
    .add-product-title {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 48px;
      margin-top: 38px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 12px;
    }
    .add-product-form {
      width: 90%;
      margin-top: -22px;
      display: flex;
      flex-direction: column;
      gap: 32px;
    }
    .add-product-form .form-group {
      position: relative;
      margin-bottom: 0;
      width: 100%;
      display: flex;
      flex-direction: column;
    }
    .add-product-form input[type="text"],
    .add-product-form input[type="number"],
    .add-product-form input[type="file"],
    .add-product-form textarea,
    .add-product-form select {
      width: 100%;
      padding: 16px 14px 16px 14px;
      border: 2px solid var(--border);
      border-radius: 8px;
      font-size: 1.05rem;
      background: #f7f8fa;
      color: var(--text);
      outline: none;
      transition: border-color 0.25s, box-shadow 0.25s, background 0.25s;
      box-shadow: 0 2px 8px 0 rgba(162,89,247,0.04);
      margin-bottom: 0;
      appearance: none;
    }
    .add-product-form input[type="file"] {
      padding: 10px 0 10px 0;
      background: transparent;
      border: none;
      box-shadow: none;
    }
    .add-product-form input:focus,
    .add-product-form textarea:focus,
    .add-product-form select:focus {
      border-color: var(--primary);
      background: #fff;
      box-shadow: 0 0 0 2px #a259f755;
    }
    .add-product-form label {
      position: absolute;
      left: 18px;
      top: 50%;
      transform: translateY(-50%);
      background: transparent;
      color: #a1a1aa;
      font-size: 1.05rem;
      pointer-events: none;
      transition: 0.2s cubic-bezier(.4,0,.2,1);
      padding: 0 4px;
      z-index: 2;
    }
    .add-product-form input:focus + label,
    .add-product-form input:not(:placeholder-shown) + label,
    .add-product-form textarea:focus + label,
    .add-product-form textarea:not(:placeholder-shown) + label,
    .add-product-form select:focus + label,
    .add-product-form select:not([value=""]) + label {
      top: -14px;
      left: 10px;
      background: transparent;
      color: var(--primary);
      font-size: 0.92rem;
      padding: 0 6px;
      border-radius: 8px;
      box-shadow: 0 2px 8px 0 rgba(31, 38, 135, 0.06);
    }
    .add-product-form textarea {
      min-height: 60px;
      max-height: 180px;
      resize: vertical;
    }
    .add-product-form .form-row {
      display: flex;
      gap: 18px;
      margin-bottom: 0;
      flex-wrap: wrap;
      width: 100%;
    }
    .add-product-form .form-row > .form-group {
      flex: 1 1 0;
      min-width: 0;
    }
    .add-product-form .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      margin-top: 18px;
    }
    .add-product-form .cancel-btn, .add-product-form .save-btn {
      border: none;
      border-radius: 8px;
      padding: 12px 28px;
      font-size: 1.08rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.22s, color 0.22s, box-shadow 0.22s, transform 0.18s;
      box-shadow: 0 2px 8px 0 rgba(162,89,247,0.08);
      outline: none;
      position: relative;
      overflow: hidden;
    }
    .add-product-form .cancel-btn {
      background: #f3f4f6;
      color: var(--muted);
    }
    .add-product-form .cancel-btn:hover {
      background: #e5e7eb;
      color: #22223b;
      transform: translateY(-2px) scale(1.03);
      box-shadow: 0 4px 16px 0 rgba(31,38,135,0.10);
    }
    .add-product-form .save-btn {
      background: linear-gradient(90deg, #a259f7 0%, #7c3aed 100%);
      color: #fff;
    }
    .add-product-form .save-btn:hover {
      background: linear-gradient(90deg, #7c3aed 0%, #a259f7 100%);
      color: #fff;
      transform: translateY(-2px) scale(1.03);
      box-shadow: 0 4px 16px 0 rgba(162,89,247,0.18);
    }
    .add-product-form .form-row {
      display: flex;
      gap: 18px;
      margin-bottom: 0;
      flex-wrap: wrap;
    }
    .add-product-form .form-row > div {
      flex: 1 1 0;
      min-width: 0;
      display: flex;
      flex-direction: column;
    }
    @media (max-width: 700px) {
      .main-content {
        flex-direction: column;
        height: auto;
      }
      .products-section, .add-product-panel {
        width: 100% !important;
        max-width: 100vw !important;
        min-width: 0;
        height: auto;
        padding: 12px 4vw 12px 4vw;
      }
      .add-product-panel.active {
        flex: 0 0 100vw;
        width: 100vw;
        max-width: 100vw;
      }
      .add-product-form .form-row {
        flex-direction: column;
        gap: 0;
      }
    }
    .add-product-form .form-row {
      display: flex;
      gap: 12px;
    }
    .add-product-form .form-row input {
      flex: 1 1 0;
    }
    .add-product-form .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      margin-top: 18px;
    }
    .add-product-form .cancel-btn {
      background: #f3f4f6;
      color: var(--muted);
      border: none;
      border-radius: 7px;
      padding: 10px 22px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }
     .add-product-btn .add-icon {
      width: 22px;
      height: 22px;
      margin-right: 8px;
      display: inline-block;
      vertical-align: middle;
      object-fit: contain;
      filter: brightness(0) invert(1);
    }
    .add-product-form .cancel-btn:hover {
      background: #e5e7eb;
    }
    .add-product-form .save-btn {
      background: var(--primary);
      color: var(--white);
      border: none;
      border-radius: 7px;
      padding: 10px 22px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s, box-shadow 0.2s;
      box-shadow: 0 2px 8px 0 rgba(162,89,247,0.10);
    }
    .add-product-form .save-btn:hover {
      background: var(--primary-dark);
    }
    .footer {
      padding: 18px 36px 8px 36px;
      color: var(--muted);
      font-size: 0.98rem;
      text-align: left;
      margin-top: auto;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .footer img {
      height: 18px;
      vertical-align: middle;
    }
    @media (max-width: 1100px) {
      .main-content {
        flex-direction: column;
        gap: 18px;
        padding: 18px 8vw 0 8vw;
      }
      .products-section, .add-product-panel {
        max-width: 100vw;
        min-width: 0;
        width: 100%;
      }
      .add-product-panel {
        margin-left: 0;
      }
    }
    @media (max-width: 700px) {
      .header, .footer {
        padding: 12px 2vw;
      }
      .main-content {
        padding: 8px 2vw 0 2vw;
      }
      .products-section, .add-product-panel {
        padding: 12px 4vw 12px 4vw;
      }
      .products-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      .products-filters {
        flex-direction: column;
        gap: 10px;
      }
    }
    .panel-abs {
  background: var(--white);
  border-radius: 0 0 0 0;
  border: 1px solid;
  border-left-color: #ecedee;
  border-right-color: transparent;
  border-top-color: transparent;
   border-bottom-color: transparent;
  width: 0%;
  height: 100%;
  padding: 32px 28px 24px 28px;
  display: none;
  flex-direction: column;
  opacity: 0;
  pointer-events: none;
  position: absolute;
  top: 0; right: 0; left: 0; bottom: 0;
  z-index: 2;
  overflow: hidden;
  box-sizing: border-box;
  transition: opacity 0.5s cubic-bezier(.23,1.02,.32,1), transform 0.5s cubic-bezier(.23,1.02,.32,1);
}
.panel-abs.active {
  display: flex;
  width: 100%;
  opacity: 1;
  pointer-events: auto;
  transform: translateX(0) scale(1);
  animation: fadeInPanel 0.7s cubic-bezier(.23,1.02,.32,1);
}
 .update-product-panel {
      background: var(--white);
      border-radius: 0 0 0 0;
      border: 1px solid;
      border-left-color: #ecedee;
      border-right-color: transparent;
      border-top-color: transparent;
      border-bottom-color: transparent;
      flex: 0 0 0;
      min-width: 340px;
      max-width: 420px;
      width: 0;
      height: 100%;
      padding: 32px 28px 24px 28px;
      margin-left: 0;
      display: flex;
      flex-direction: column;
      opacity: 0;
      pointer-events: none;
      transform: translateX(60px) scale(0.98);
      transition: opacity 0.5s cubic-bezier(.23,1.02,.32,1), transform 0.5s cubic-bezier(.23,1.02,.32,1), width 0.5s cubic-bezier(.23,1.02,.32,1), flex 0.5s cubic-bezier(.23,1.02,.32,1);
      position: absolute;
      z-index: 2;
  overflow-y: auto;
  overflow-x: hidden;
  
    }
    .update-product-panel.active {
       opacity: 1;
      pointer-events: auto;
      transform: translateX(0) scale(1);
      animation: slideInPanel 0.7s cubic-bezier(.23,1.02,.32,1);
      width: 100%;
      height: 100%;
      max-width: 420px;
      flex: 0 0 420px;
    }
    @keyframes fadeInPanel {
      from {
        opacity: 0;
        transform: translateX(60px) scale(0.98);
      }
      60% {
        opacity: 1;
        transform: translateX(-8px) scale(1.01);
      }
      to {
        opacity: 1;
        transform: translateX(0) scale(1);
      }
    }
     .ripple {
      position: absolute;
      width: 100px;
      height: 100px;
      background: rgba(255,255,255,0.5);
      border-radius: 50%;
      pointer-events: none;
      animation: ripple-animate 0.6s linear;
      z-index: 1;
    }
    @keyframes ripple-animate {
      from {
        transform: scale(0);
        opacity: 0.7;
      }
      to {
        transform: scale(2.5);
        opacity: 0;
      }
    }
   
 .switch-icon-wrapper {
      display: flex;
      align-items: center;
      gap: 56px;
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="logo"><img class="logo-img" src="icons/FullLogo_NoBuffer.png" ></div>

  </div>
  <div class="main-content">
    <div class="products-section" id="productsSection">
    <div class="products-header">
        <div class="products-title">All Products</div>
          <div class="switch-icon-wrapper"><img class="grid" id="modeSwitchIcon" src="icons/switch.png" style="cursor:pointer;">
        <button class="add-product-btn" id="showAddProduct"><img src="icons/add.png" class="add-icon" alt="Add"> Add New Product</button>
      </div>
      </div>
      <div class="products-filters">
        <div class="search-input-wrapper">
          <input type="text" id="searchProducts" placeholder="Search products...">
          <img src="icons/search.png" class="search-icon" id="searchIcon" alt="Search">
        </div>
    
  <script>
    // Mobile redirection logic
    (function() {
      var mobilePage = 'product_catalogue_mobile.html';
      var desktopPage = 'product_dashboard.html';
      function handleRedirect() {
        if (window.innerWidth <= 800 && !window.location.pathname.endsWith(mobilePage)) {
          window.location.href = mobilePage;
        }
        if (window.innerWidth > 800 && window.location.pathname.endsWith(mobilePage)) {
          window.location.href = desktopPage;
        }
      }
      window.addEventListener('resize', handleRedirect);
      window.addEventListener('DOMContentLoaded', handleRedirect);
    })();
    // Add/remove panel-active class based on panel state
    function updatePanelActiveClass() {
      const productsSection = document.getElementById('productsSection');
      const addPanel = document.getElementById('addProductPanel');
      const updatePanel = document.getElementById('updateProductPanel');
      if ((addPanel && addPanel.classList.contains('active')) || (updatePanel && updatePanel.classList.contains('active'))) {
        productsSection.classList.add('panel-active');
      } else {
        productsSection.classList.remove('panel-active');
      }
    }
    document.getElementById('showAddProduct').addEventListener('click', updatePanelActiveClass);
    document.getElementById('cancelAddProduct').addEventListener('click', updatePanelActiveClass);
    document.getElementById('cancelUpdateProduct').addEventListener('click', updatePanelActiveClass);
    // Also call after showing update panel
    document.getElementById('productsTableBody').addEventListener('click', function(e) {
      setTimeout(updatePanelActiveClass, 400);
    });
    // ...existing code...
    // Search icon toggle
    const searchInput = document.getElementById('searchProducts');
    const searchIcon = document.getElementById('searchIcon');
    if (searchInput && searchIcon) {
      searchInput.addEventListener('input', function() {
        searchIcon.style.opacity = this.value ? '0' : '0.7';
      });
      // On page load, hide icon if input has value
      if (searchInput.value) searchIcon.style.opacity = '0';
    }
  </script>
        <select id="categoryFilter">
          <option value="">All Categories</option>
        </select>
        <select id="stockStatusFilter">
          <option value="all">All Stock Status</option>
          <option value="in">In Stock</option>
          <option value="low">Low Stock</option>
          <option value="out">Out of Stock</option>
        </select>
      </div>
      <table class="products-table" id="productsTable">
        <thead>
          <tr>
            <th>ID</th>
            <th>Image</th>
            <th>Name</th>
            <th>Description</th>
             <th>Specifications</th>
             <th>Category</th>
            <th>Price</th>
            <th>Stock</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="productsTableBody">
          <tr><td colspan="8" style="text-align:center;color:#aaa;">Loading...</td></tr>
        </tbody>
      </table>
      <script>
        // Fetch products and display in the table
        // Pagination logic
        let currentPage = 1;
  const productsPerPage = 5;
        function renderProductsTable(products) {
          // ...existing code...
          const tbody = document.getElementById('productsTableBody');
          const totalPages = Math.ceil(products.length / productsPerPage) || 1;
          if (currentPage > totalPages) currentPage = totalPages;
          if (currentPage < 1) currentPage = 1;
          const startIdx = (currentPage - 1) * productsPerPage;
          const endIdx = startIdx + productsPerPage;
          const pageProducts = products.slice(startIdx, endIdx);
          if (!pageProducts.length) {
            tbody.innerHTML = '<tr><td colspan="8" style="text-align:center;color:#aaa;">No products found.</td></tr>';
            return;
          }
          tbody.innerHTML = pageProducts.map(prod => `
            <tr>
              <td>${prod.product_id}</td>
              <td>
                <img src="${prod.image ? prod.image : 'https://via.placeholder.com/38'}" alt="${prod.name}" style="width:58px;height:50px;border-radius:7px;object-fit:cover;">
              </td>
              <td>${prod.name}</td>
              <td style="max-width:220px;white-space:pre-line;overflow-wrap:break-word;">${prod.description || ''}</td>
                <td style="max-width:220px;white-space:pre-line;overflow-wrap:break-word;">${prod.Specifications || ''}</td>
                <td>${prod.category}</td>
              <td>${parseFloat(prod.price).toLocaleString(undefined, {minimumFractionDigits:0, maximumFractionDigits:0})}FCFA</td>
              <td class="stock">${prod.stock}</td>
              <td>
                <button class="edit" title="Edit"><img src="${document.body.classList.contains('dark-mode') ? 'icons/fountain-pen-white.png' : 'icons/fountain-pen.png'}"></button>
                <button class="delete" title="Delete"><img src="icons/trash-bin.png"></button>
              </td>
            </tr>
          `).join('');
          // Update pagination controls
          const pagination = document.querySelector('.pagination');
          if (pagination) {
            pagination.innerHTML = `
              <span class="${currentPage === 1 ? 'disabled' : ''}" id="prevPage">Previous</span>
              <span>Page ${currentPage} of ${totalPages}</span>
              <a class="${currentPage === totalPages ? 'disabled' : ''}" id="nextPage">Next</a>
            `;
            // Add event listeners
            document.getElementById('prevPage').onclick = function() {
              if (currentPage > 1) {
                currentPage--;
                renderProductsTable(products);
              }
            };
            document.getElementById('nextPage').onclick = function() {
              if (currentPage < totalPages) {
                currentPage++;
                renderProductsTable(products);
              }
            };
          }
        }
        function renderCategoryDropdowns(categories) {
          // For filter
          const filter = document.getElementById('categoryFilter');
          if (filter) {
            filter.innerHTML = '<option value="">All Categories</option>' +
              categories.map(cat => `<option value="${cat}">${cat}</option>`).join('');
          }
          // For add product form
          const addCat = document.getElementById('productCategory');
          if (addCat) {
            addCat.innerHTML = '<option value="" disabled selected hidden></option>' +
              categories.map(cat => `<option value="${cat}">${cat}</option>`).join('');
          }
        }
        let allProducts = [];
        function fetchProductsAndCategories() {
          fetch('php logics/product_data.php')
            .then(res => res.json())
            .then(data => {
              allProducts = data.products;
              renderProductsTable(allProducts);
              renderCategoryDropdowns(data.categories);
            });
        }
        // Filtering logic (category + search)
        document.addEventListener('DOMContentLoaded', function() {
          const filter = document.getElementById('categoryFilter');
          const searchInput = document.getElementById('searchProducts');
          const stockFilter = document.getElementById('stockStatusFilter');
          function applyFilters() {
            let filtered = allProducts;
            const catVal = filter && filter.value ? filter.value.toLowerCase() : '';
            const searchVal = searchInput && searchInput.value ? searchInput.value.trim().toLowerCase() : '';
            const stockVal = stockFilter && stockFilter.value ? stockFilter.value : 'all';
            // Category filter
            if (catVal) {
              filtered = filtered.filter(p => (p.category || '').toLowerCase() === catVal);
            }
            // Search filter
            if (searchVal) {
              filtered = filtered.filter(p => {
                const name = (p.name || '').toLowerCase();
                const id = (p.product_id || '').toString().toLowerCase();
                const category = (p.category || '').toLowerCase();
                return name.includes(searchVal) || id.includes(searchVal) || category.includes(searchVal);
              });
            }
            // Stock status filter
            if (stockVal !== 'all') {
              // Get all stock values as numbers
              const stocks = filtered.map(p => Number(p.stock));
              const maxStock = Math.max(...stocks);
              const minStock = Math.min(...stocks);
              if (stockVal === 'in') {
                filtered = filtered.filter(p => Number(p.stock) === maxStock);
              } else if (stockVal === 'out') {
                filtered = filtered.filter(p => Number(p.stock) === minStock);
              } else if (stockVal === 'low') {
                filtered = filtered.filter(p => Number(p.stock) !== maxStock && Number(p.stock) !== minStock);
              }
            }
            renderProductsTable(filtered);
          }
          if (filter) filter.addEventListener('change', applyFilters);
          if (searchInput) searchInput.addEventListener('input', applyFilters);
          if (stockFilter) stockFilter.addEventListener('change', applyFilters);
        });
        // Call this on page load
        fetchProductsAndCategories();
      </script>
      <div class="pagination">
        <span class="disabled">Previous</span>
        <span>Page 1 of 2</span>
        <a>Next</a>
      </div>
    </div>
    <div id="panelContainer" style="position: relative; width: 0%; height: 100%; min-width: 0; max-width: 100vw; transition: width 0.5s cubic-bezier(.23,1.02,.32,1); display: flex; flex-direction: column;">
      <div class="add-product-panel panel-abs" id="addProductPanel" style="overflow: visible;">
      <div class="add-product-title">Add New Product</div>
      <form class="add-product-form">
        <div class="form-group">
          <input type="text" id="productName" placeholder=" " required autocomplete="off">
          <label for="productName">Product Name</label>
        </div>
        <div class="form-group">
          <textarea id="productDesc" rows="3" placeholder=" " autocomplete="off"></textarea>
          <label for="productDesc">Description</label>
        </div>
        <div class="form-group">
          <textarea id="productSpecs" rows="3" placeholder=" " autocomplete="off"></textarea>
          <label for="productSpecs">Specifications</label>
        </div>
        <div class="form-group">
          <input type="text" id="productCategory" required placeholder=" ">
          <label for="productCategory">Category</label>
        </div>
        <div class="form-row">
          <div class="form-group">
            <input type="number" id="productPrice" min="0" step="1" value="0" placeholder=" " required autocomplete="off">
            <label for="productPrice">Price</label>
          </div>
        </div>
        <div class="form-group">
          <input type="file" id="productImage" accept="image/*">
        </div>
        <div class="form-actions">
          <button type="button" class="cancel-btn" id="cancelAddProduct">Cancel</button>
          <button type="submit" class="save-btn">Save Product</button>
        </div>
      </form>
    </div>
  <div class="update-product-panel panel-abs" id="updateProductPanel" style="overflow: visible;">
      <div class="add-product-title">Update Product</div>
      <form class="add-product-form" id="updateProductForm">
  <input type="hidden" id="updateProductId" name="product_id">
        <div class="form-group">
          <input type="text" id="updateProductName" placeholder=" " required autocomplete="off">
          <label for="updateProductName">Product Name</label>
        </div>
        <div class="form-group">
          <textarea id="updateProductDesc" rows="3" placeholder=" " autocomplete="off"></textarea>
          <label for="updateProductDesc">Description</label>
        </div>
        <div class="form-group">
          <textarea id="updateProductSpecs" rows="3" placeholder=" " autocomplete="off"></textarea>
          <label for="updateProductSpecs">Specifications</label>
        </div>
        <div class="form-group">
          <input type="text" id="updateProductCategory" required placeholder=" ">
          <label for="updateProductCategory">Category</label>
        </div>
        <div class="form-row">
          <div class="form-group">
            <input type="number" id="updateProductPrice" min="0" step="1" value="0" placeholder=" " required autocomplete="off">
            <label for="updateProductPrice">Price</label>
          </div>
        </div>
        <div class="form-group">
          <input type="file" id="updateProductImage" accept="image/*">
        </div>
        <div class="form-actions">
          <button type="button" class="cancel-btn" id="cancelUpdateProduct">Cancel</button>
          <button type="submit" class="save-btn">Save Changes</button>
        </div>
      </form>
    </div>
  </div>
  <script>
      // Dark mode toggle logic
  const modeSwitchIcon = document.getElementById('modeSwitchIcon');
  let darkMode = false;
  const logoImg = document.querySelector('.logo-img');
        // Swap edit icon for dark mode
        function updateEditIconsForMode(darkMode) {
          document.querySelectorAll('.edit img').forEach(function(img) {
            img.src = darkMode ? 'icons/fountain-pen-white.png' : 'icons/fountain-pen.png';
          });
        }
        modeSwitchIcon.addEventListener('click', function() {
          darkMode = !darkMode;
          document.body.classList.toggle('dark-mode', darkMode);
          modeSwitchIcon.src = darkMode ? 'icons/switch (1).png' : 'icons/switch.png';
          updateEditIconsForMode(darkMode);
          if (logoImg) {
            logoImg.src = darkMode ? 'icons/White logo.png' : 'icons/FullLogo_NoBuffer.png';
          }
        });
        // On page load, set correct edit icon for mode
        document.addEventListener('DOMContentLoaded', function() {
          updateEditIconsForMode(document.body.classList.contains('dark-mode'));
          if (logoImg) {
            logoImg.src = document.body.classList.contains('dark-mode') ? 'icons/White logo.png' : 'icons/FullLogo_NoBuffer.png';
          }
        });
    // Show Update Product Panel with fade-in and populate fields
    document.getElementById('productsTableBody').addEventListener('click', function(e) {
      const btn = e.target.closest('.edit');
      if (!btn) return;
      // Find the row and extract product data
      const row = btn.closest('tr');
      if (!row) return;
      const cells = row.querySelectorAll('td');
      // Set product_id in hidden input
      document.getElementById('updateProductId').value = cells[0].textContent.trim();
      document.getElementById('updateProductName').value = cells[2].textContent.trim();
      document.getElementById('updateProductDesc').value = cells[3].textContent.trim();
      document.getElementById('updateProductSpecs').value = cells[4].textContent.trim();
      document.getElementById('updateProductCategory').value = cells[5].textContent.trim();
      document.getElementById('updateProductPrice').value = parseFloat(cells[6].textContent.replace('$','').replace(/,/g,''));
      // Hide add panel, show update panel
      document.getElementById('addProductPanel').classList.remove('active');
      document.getElementById('addProductPanel').style.display = 'none';
      document.getElementById('updateProductPanel').classList.add('active');
      document.getElementById('updateProductPanel').style.display = 'flex';
      document.getElementById('productsSection').style.width = '80%';
      document.getElementById('panelContainer').style.width = '20%';
      document.getElementById('productsSection').style.flex = '1 1 0';
      setTimeout(()=>{
        document.getElementById('updateProductPanel').scrollIntoView({behavior:'smooth', block:'center'});
      }, 350);
    });
    document.getElementById('cancelUpdateProduct').addEventListener('click', function() {
      document.getElementById('updateProductPanel').classList.remove('active');
      document.getElementById('updateProductPanel').style.display = 'none';
      document.getElementById('productsSection').style.width = '100%';
      document.getElementById('panelContainer').style.width = '0%';
      setTimeout(()=>{ productsSection.style.flex = '1 1 0'; }, 500);
    });
    // Prevent update form submit (demo only)
    document.getElementById('updateProductForm').onsubmit = function(e) {
      e.preventDefault();
      const form = e.target;
      const formData = new FormData(form);
      formData.set('name', document.getElementById('updateProductName').value.trim());
      formData.set('description', document.getElementById('updateProductDesc').value.trim());
      formData.set('Specifications', document.getElementById('updateProductSpecs').value.trim());
  // Ensure the backend receives the correct field for the Specifications column
  formData.set('Specifications', document.getElementById('updateProductSpecs').value.trim());
      formData.set('category', document.getElementById('updateProductCategory').value);
      formData.set('price', document.getElementById('updateProductPrice').value);
      const imageInput = document.getElementById('updateProductImage');
      if (imageInput && imageInput.files[0]) {
        formData.set('image', imageInput.files[0]);
      }
      fetch('php logics/update_product.php', {
        method: 'POST',
        body: formData
      })
      .then(res => res.json())
      .then(data => {
        if (data.success) {
          document.getElementById('updateProductPanel').classList.remove('active');
          document.getElementById('productsSection').style.width = '100%';
          document.getElementById('panelContainer').style.width = '0%';
          form.reset();
          fetchProductsAndCategories();
        } else {
          alert(data.error || 'Failed to update product.');
        }
      })
      .catch(() => alert('Failed to update product.'));
    };
  </script>
  </div>

  <script>
    // Show Add Product Panel with animation
    const showAddProductBtn = document.getElementById('showAddProduct');
    const addProductPanel = document.getElementById('addProductPanel');
    const productsSection = document.getElementById('productsSection');
    const cancelAddProductBtn = document.getElementById('cancelAddProduct');
    showAddProductBtn.addEventListener('click', function() {
      addProductPanel.classList.add('active');
      updateProductPanel.classList.remove('active');
      productsSection.style.width = '80%';
      document.getElementById('panelContainer').style.width = '20%';
      productsSection.style.flex = '1 1 0';
      addProductPanel.style.display = 'flex';
      setTimeout(()=>{ addProductPanel.scrollIntoView({behavior:'smooth', block:'center'}); }, 350);
    });
    cancelAddProductBtn.addEventListener('click', function() {
      addProductPanel.classList.remove('active');
      productsSection.style.width = '100%';
      document.getElementById('panelContainer').style.width = '0%';
      addProductPanel.style.display = 'none';
      setTimeout(()=>{ productsSection.style.flex = '1 1 0'; }, 500);
    });
    // Advanced button ripple effect
    document.querySelectorAll('.add-product-btn, .save-btn').forEach(function(btn) {
      btn.addEventListener('click', function(e) {
        const ripple = document.createElement('span');
        ripple.className = 'ripple';
        ripple.style.position = 'absolute';
        ripple.style.left = (e.offsetX - 50) + 'px';
        ripple.style.top = (e.offsetY - 50) + 'px';
        ripple.style.width = '100px';
        ripple.style.height = '100px';
        ripple.style.background = 'rgba(255,255,255,0.5)';
        ripple.style.borderRadius = '50%';
        ripple.style.pointerEvents = 'none';
        ripple.style.animation = 'ripple-animate 0.6s linear';
        ripple.style.zIndex = 1;
        this.appendChild(ripple);
        setTimeout(() => ripple.remove(), 600);
      });
    });
    // Prevent form submit (demo only)
    document.querySelector('.add-product-form').onsubmit = function(e) {
      e.preventDefault();
      const form = e.target;
      const formData = new FormData(form);
      formData.set('name', document.getElementById('productName').value.trim());
      formData.set('description', document.getElementById('productDesc').value.trim());
      formData.set('Specifications', document.getElementById('productSpecs').value.trim());
  // Ensure the backend receives the correct field for the Specifications column
  formData.set('Specifications', document.getElementById('productSpecs').value.trim());
      formData.set('category', document.getElementById('productCategory').value);
      formData.set('price', document.getElementById('productPrice').value);
      const imageInput = document.getElementById('productImage');
      if (imageInput && imageInput.files[0]) {
        formData.set('image', imageInput.files[0]);
      }
      fetch('php logics/add_product.php', {
        method: 'POST',
        body: formData
      })
      .then(res => res.json())
      .then(data => {
        if (data.success) {
          // Hide panel, reload products, slide out panel
          document.getElementById('addProductPanel').classList.remove('active');
          document.getElementById('addProductPanel').style.display = 'none';
          document.getElementById('productsSection').style.width = '100%';
          document.getElementById('panelContainer').style.width = '0%';
          document.getElementById('productsSection').style.flex = '1 1 0';
          fetchProductsAndCategories();
          form.reset();
        } else {
          alert(data.error || 'Failed to add product.');
        }
      })
      .catch(() => alert('Failed to add product.'));
    };
  </script>
  <script>
    document.getElementById('productsTableBody').addEventListener('click', function(e) {
  const delBtn = e.target.closest('.delete');
  if (!delBtn) return;
  const row = delBtn.closest('tr');
  if (!row) return;
  const productId = row.querySelector('td').textContent.trim();
  if (confirm('Are you sure you want to delete this product?')) {
    fetch('php logics/delete_product.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
      body: 'product_id=' + encodeURIComponent(productId)
    })
    .then(res => res.json())
    .then(data => {
      if (data.success) {
        location.reload();
      } else {
        alert(data.error || 'Failed to delete product.');
      }
    })
    .catch(() => alert('Failed to delete product.'));
  }
});

  </script>
</body>
</html>
